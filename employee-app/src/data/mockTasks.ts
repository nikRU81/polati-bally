import type { EmployeeTask } from '../types';

// All 54 tasks from original tasks.csv
export const mockTasks: EmployeeTask[] = [
  // Обучение
  {
    taskId: 'OBU_001',
    category: 'Обучение',
    taskName: 'Велком бонус',
    basePoints: 500,
    description: 'Бонус за прохождение вводного курса при приёме на работу',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'OBU_002',
    category: 'Обучение',
    taskName: 'Ачивка обучение',
    basePoints: 300,
    description: 'Награда за успешное завершение обучающей программы',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'OBU_003',
    category: 'Обучение',
    taskName: 'Медаль УЦ',
    basePoints: 500,
    description: 'Награда за отличие в учебном центре (10% сотрудников)',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  // Смены
  {
    taskId: 'SME_001',
    category: 'Смены',
    taskName: 'Эволюция 1 смена',
    basePoints: 100,
    description: 'Первая смена в компании',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_002',
    category: 'Смены',
    taskName: 'Эволюция 10 смен',
    basePoints: 100,
    description: 'Достижение 10 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_003',
    category: 'Смены',
    taskName: 'Эволюция 20 смен',
    basePoints: 100,
    description: 'Достижение 20 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_004',
    category: 'Смены',
    taskName: 'Эволюция 30 смен',
    basePoints: 100,
    description: 'Достижение 30 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_005',
    category: 'Смены',
    taskName: 'Эволюция 40 смен',
    basePoints: 100,
    description: 'Достижение 40 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_006',
    category: 'Смены',
    taskName: 'Эволюция 50 смен',
    basePoints: 100,
    description: 'Достижение 50 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_007',
    category: 'Смены',
    taskName: 'Эволюция 75 смен',
    basePoints: 100,
    description: 'Достижение 75 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_008',
    category: 'Смены',
    taskName: 'Эволюция 100 смен',
    basePoints: 100,
    description: 'Достижение 100 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_009',
    category: 'Смены',
    taskName: 'Эволюция 150 смен',
    basePoints: 100,
    description: 'Достижение 150 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_010',
    category: 'Смены',
    taskName: 'Эволюция 200 смен',
    basePoints: 100,
    description: 'Достижение 200 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_011',
    category: 'Смены',
    taskName: 'Эволюция 225 смен',
    basePoints: 100,
    description: 'Достижение 225 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '2',
  },
  {
    taskId: 'SME_012',
    category: 'Смены',
    taskName: 'Эволюция 250 смен',
    basePoints: 100,
    description: 'Достижение 250 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '2',
  },
  {
    taskId: 'SME_013',
    category: 'Смены',
    taskName: 'Эволюция 300 смен',
    basePoints: 100,
    description: 'Достижение 300 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '2',
  },
  {
    taskId: 'SME_014',
    category: 'Смены',
    taskName: 'Эволюция 350 смен',
    basePoints: 100,
    description: 'Достижение 350 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '2',
  },
  {
    taskId: 'SME_015',
    category: 'Смены',
    taskName: 'Эволюция 400 смен',
    basePoints: 100,
    description: 'Достижение 400 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '2',
  },
  {
    taskId: 'SME_016',
    category: 'Смены',
    taskName: 'Эволюция 450 смен',
    basePoints: 100,
    description: 'Достижение 450 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '3',
  },
  {
    taskId: 'SME_017',
    category: 'Смены',
    taskName: 'Эволюция 500 смен',
    basePoints: 100,
    description: 'Достижение 500 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '3',
  },
  {
    taskId: 'SME_018',
    category: 'Смены',
    taskName: 'Эволюция 750 смен',
    basePoints: 100,
    description: 'Достижение 750 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '4',
  },
  {
    taskId: 'SME_019',
    category: 'Смены',
    taskName: 'Эволюция 1000 смен',
    basePoints: 100,
    description: 'Достижение 1000 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '5',
  },
  {
    taskId: 'SME_020',
    category: 'Смены',
    taskName: 'Герб объекта',
    basePoints: 500,
    description: '500 баллов за каждый объект (в среднем 2 объекта/год)',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'SME_021',
    category: 'Смены',
    taskName: 'Кочевник 2 объекта',
    basePoints: 300,
    description: 'Награда за работу на нескольких объектах',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_022',
    category: 'Смены',
    taskName: 'Кочевник 10 объектов',
    basePoints: 300,
    description: 'Награда за работу на 10 объектах',
    status: 'available',
    frequency: 'once',
    appliesToYear: '5',
  },
  {
    taskId: 'SME_023',
    category: 'Смены',
    taskName: 'Ночная Сова 1 смена',
    basePoints: 300,
    description: 'Первая ночная смена (30% работают в ночь)',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'SME_024',
    category: 'Смены',
    taskName: 'Ночная Сова 500 смен',
    basePoints: 300,
    description: '500 ночных смен (30% работают в ночь)',
    status: 'available',
    frequency: 'once',
    appliesToYear: '3',
  },
  {
    taskId: 'SME_025',
    category: 'Смены',
    taskName: 'Ночная Сова 1000 смен',
    basePoints: 300,
    description: '1000 ночных смен (30% работают в ночь)',
    status: 'available',
    frequency: 'once',
    appliesToYear: '5',
  },
  // Карьера
  {
    taskId: 'KAR_001',
    category: 'Карьера',
    taskName: 'Бригадир',
    basePoints: 500,
    description: 'Награда за назначение бригадиром (20% становятся)',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'KAR_002',
    category: 'Карьера',
    taskName: 'Повышение СЛИП 2',
    basePoints: 750,
    description: 'Повышение квалификации до СЛИП 2',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'KAR_003',
    category: 'Карьера',
    taskName: 'Повышение СЛИП 3',
    basePoints: 750,
    description: 'Повышение квалификации до СЛИП 3',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'KAR_004',
    category: 'Карьера',
    taskName: 'Повышение СЛИП 4',
    basePoints: 750,
    description: 'Повышение квалификации до СЛИП 4',
    status: 'available',
    frequency: 'once',
    appliesToYear: '2',
  },
  {
    taskId: 'KAR_005',
    category: 'Карьера',
    taskName: 'Повышение СЛИП 5',
    basePoints: 750,
    description: 'Повышение квалификации до СЛИП 5',
    status: 'available',
    frequency: 'once',
    appliesToYear: '2',
  },
  // Лояльность
  {
    taskId: 'LOY_001',
    category: 'Лояльность',
    taskName: 'ПОЛАТИ БОНУС Серебро',
    basePoints: 500,
    description: 'Переход на уровень Серебро в программе БОНУС',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'LOY_002',
    category: 'Лояльность',
    taskName: 'ПОЛАТИ БОНУС Золото',
    basePoints: 500,
    description: 'Переход на уровень Золото в программе БОНУС',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'LOY_003',
    category: 'Лояльность',
    taskName: 'ПОЛАТИ СТАЖ 250 смен',
    basePoints: 1000,
    description: 'Награда за стаж 250 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '2',
  },
  {
    taskId: 'LOY_004',
    category: 'Лояльность',
    taskName: 'ПОЛАТИ СТАЖ 500 смен',
    basePoints: 1000,
    description: 'Награда за стаж 500 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '3',
  },
  {
    taskId: 'LOY_005',
    category: 'Лояльность',
    taskName: 'ПОЛАТИ СТАЖ 750 смен',
    basePoints: 1000,
    description: 'Награда за стаж 750 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '4',
  },
  {
    taskId: 'LOY_006',
    category: 'Лояльность',
    taskName: 'ПОЛАТИ СТАЖ 1000 смен',
    basePoints: 1000,
    description: 'Награда за стаж 1000 смен',
    status: 'available',
    frequency: 'once',
    appliesToYear: '5',
  },
  // Межвахта
  {
    taskId: 'MEZ_001',
    category: 'Межвахта',
    taskName: 'Возврат на 2-ю вахту',
    basePoints: 2000,
    description: 'Бонус за возврат на вторую вахту',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  {
    taskId: 'MEZ_002',
    category: 'Межвахта',
    taskName: 'Межвахтовый отпуск до 20 дней',
    basePoints: 1000,
    description: '1000 баллов за каждый короткий межвахтовый отпуск (3 раза/год)',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  // Приведи друга
  {
    taskId: 'DRU_001',
    category: 'Приведи друга',
    taskName: 'Друг отработал 60 смен',
    basePoints: 1500,
    description: 'Награда за приведённого друга (10% приводят)',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  // Активности
  {
    taskId: 'AKT_001',
    category: 'Активности',
    taskName: 'Актуализация телефона',
    basePoints: 150,
    description: '150 баллов × 4 раза в год',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'AKT_002',
    category: 'Активности',
    taskName: 'Размер СИЗ',
    basePoints: 150,
    description: '150 баллов × 2 раза в год',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'AKT_003',
    category: 'Активности',
    taskName: 'Оценка ИТР',
    basePoints: 150,
    description: '150 баллов × 12 раз в год (ежемесячно)',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'AKT_004',
    category: 'Активности',
    taskName: 'Опрос',
    basePoints: 150,
    description: '150 баллов × 4 раза в год (ежеквартально)',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'AKT_005',
    category: 'Активности',
    taskName: 'Наклейка на машину',
    basePoints: 500,
    description: 'Наклейка на машину (20% имеют авто)',
    status: 'available',
    frequency: 'once',
    appliesToYear: '1',
  },
  // События
  {
    taskId: 'SOB_001',
    category: 'События',
    taskName: 'Новый год',
    basePoints: 300,
    description: 'Поздравление с Новым годом',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'SOB_002',
    category: 'События',
    taskName: '23 февраля',
    basePoints: 300,
    description: 'Поздравление с Днём защитника Отечества',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'SOB_003',
    category: 'События',
    taskName: '8 марта',
    basePoints: 300,
    description: 'Поздравление с Международным женским днём',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'SOB_004',
    category: 'События',
    taskName: 'День строителя',
    basePoints: 300,
    description: 'Поздравление с Днём строителя',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'SOB_005',
    category: 'События',
    taskName: 'День рождения',
    basePoints: 300,
    description: 'Поздравление с Днём рождения',
    status: 'available',
    frequency: 'yearly',
    appliesToYear: 'all',
  },
  {
    taskId: 'SOB_006',
    category: 'События',
    taskName: 'Рождение ребёнка',
    basePoints: 1500,
    description: 'Поздравление с рождением ребёнка (20% в год)',
    status: 'available',
    frequency: 'conditional',
    appliesToYear: 'all',
  },
];

// Returns tasks filtered by employee year and marks completed ones
export function getTasksForEmployee(employeeYear: number, completedTaskIds: string[]): EmployeeTask[] {
  return mockTasks
    .filter(task => {
      // Tasks with 'all' are always available
      if (task.appliesToYear === 'all') return true;
      // Filter by year - show tasks for current year and earlier
      const taskYear = parseInt(task.appliesToYear || '1', 10);
      return taskYear <= employeeYear;
    })
    .map(task => {
      let status = task.status;

      // Mark completed tasks
      if (completedTaskIds.includes(task.taskId)) {
        status = 'completed';
      }

      return { ...task, status };
    });
}
